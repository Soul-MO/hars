# HAR Viewer 使用说明

## 工具简介

HAR Viewer 是一个使用 Go 语言开发的 HTTP Archive (HAR) 文件解析工具，提供了友好的 Web 界面，方便用户查看和分析 HAR 文件中的 HTTP 请求和响应数据。

## 功能特性

- ✅ 上传和查看 HAR 文件
- ✅ 显示 HAR 文件基本信息
- ✅ 列出所有 HTTP 请求条目
- ✅ 查看请求详细信息（方法、URL、状态码、耗时等）
- ✅ 查看请求头和响应头
- ✅ 按状态码显示不同颜色
- ✅ 提取所有唯一域名
- ✅ 下载域名 CSV 文件
- ✅ 支持 Windows 平台的可执行文件

## 安装方法

### 方法一：直接使用可执行文件

1. 下载 `harviewer.exe` 文件
2. 双击运行即可

### 方法二：从源代码编译

1. 确保已安装 Go 1.16 或更高版本
2. 克隆或下载源代码
3. 在源代码目录中运行以下命令：
   ```bash
   go build -o harviewer.exe webhar.go
   ```
4. 运行生成的 `harviewer.exe` 文件

## 使用方法

1. **启动服务器**
   - 双击 `harviewer.exe` 文件
   - 服务器将在端口 8081 上启动
   - 控制台将显示：`HAR Viewer 已启动，访问地址: http://localhost:8081`

2. **访问 Web 界面**
   - 在浏览器中输入：`http://localhost:8081`
   - 您将看到 HAR Viewer 的主界面

3. **上传 HAR 文件**
   - 点击 "选择文件" 按钮
   - 选择要解析的 HAR 文件
   - 点击 "上传 HAR 文件" 按钮

4. **查看 HAR 文件信息**
   - 上传成功后，您将看到 HAR 文件的基本信息，包括：
     - HAR 版本
     - 创建工具
     - 请求数量

5. **查看请求列表**
   - 在 "请求列表" 部分，您将看到所有 HTTP 请求的列表
   - 每个请求显示：方法、URL、状态码和耗时
   - 状态码根据不同范围显示不同颜色：
     - 200-299：绿色
     - 300-399：橙色
     - 400-499：红色
     - 500-599：深红色

6. **查看请求详情**
   - 点击任意请求条目
   - 请求详情将展开，显示：
     - 请求 URL
     - 请求方法
     - 状态码和状态文本
     - 请求耗时
     - 请求头列表
     - 响应头列表

7. **下载域名 CSV 文件**
   - 在 HAR 文件信息部分，点击 "下载域名 CSV 文件" 按钮
   - 浏览器将自动下载包含所有唯一域名的 CSV 文件
   - CSV 文件包含一个 "域名" 列，列出了所有唯一域名

## 功能说明

### 域名提取功能

- 系统会自动从所有请求 URL 中提取域名
- 去重处理，只保留唯一域名
- 支持各种 URL 格式
- 生成标准 CSV 格式文件，方便导入到其他工具中

### 状态码颜色标识

- **绿色 (200-299)**：成功响应
- **橙色 (300-399)**：重定向响应
- **红色 (400-499)**：客户端错误
- **深红色 (500-599)**：服务器错误

## 常见问题

### Q: 服务器无法启动怎么办？
A: 可能是端口 8081 被占用。您可以：
1. 检查并关闭占用端口 8081 的程序
2. 或修改源代码中的端口号，然后重新编译

### Q: 上传文件后没有显示内容怎么办？
A: 请检查：
1. 上传的文件是否为有效的 HAR 格式
2. 浏览器控制台是否有错误信息
3. 服务器控制台是否有错误信息

### Q: 如何停止服务器？
A: 您可以：
1. 在控制台窗口中按 `Ctrl+C`
2. 或直接关闭控制台窗口

## 技术规格

- 开发语言：Go 1.16+
- Web 框架：标准库 `net/http`
- 模板引擎：标准库 `html/template`
- 支持的浏览器：Chrome、Firefox、Safari、Edge 等现代浏览器
- 支持的 HAR 版本：1.2 及以上

## 命令行版本

除了 Web 版本外，还提供了命令行版本 `cmdhar.go`，使用方法：

```bash
go run cmdhar.go <har文件路径>
```

命令行版本将直接在终端中显示 HAR 文件的基本信息和请求列表。

## 注意事项

1. 请确保上传的文件是有效的 HAR 格式
2. 建议使用 Chrome、Firefox 等现代浏览器访问 Web 界面
3. 服务器默认监听端口 8081，如果需要修改，请编辑源代码中的端口号
4. CSV 文件下载功能仅在上传 HAR 文件后可用

## 更新日志

### v1.0.0 (2024-12-01)
- 初始版本
- 实现了基本的 HAR 文件查看功能
- 支持上传和查看 HAR 文件
- 显示请求列表和详细信息
- 实现了域名提取和 CSV 下载功能

## 联系方式

如有问题或建议，欢迎通过以下方式联系：
- 邮箱：your-email@example.com
- GitHub：https://github.com/your-username/har-viewer

---

**HAR Viewer** - 简单易用的 HAR 文件解析工具
